= Tema 4
Creado por Rodrigo Francisco <rhodfra@gmail.com>
Version 1.0, 10.11.2020
:description: Tema 05 BDA
:keywords: sga, pda
:sectnums: 
// Configuracion de la tabla de contenidos
:toc: 
:toc-placement!:
:toclevels: 4                                          
:toc-title: Contenido

// Ruta base de las imagenes
:imagesdir: ./README.assets/ 

// Resaltar sintaxis
:source-highlighter: pygments

// Iconos para entorno local
ifndef::env-github[:icons: font]

// Iconos para entorno github
ifdef::env-github[]
:caution-caption: :fire:
:important-caption: :exclamation:
:note-caption: :paperclip:
:tip-caption: :bulb:
:warning-caption: :warning:
endif::[]

Administración de las estructuras de Memoria

toc::[]

== Arquitectura de las estructuras de memoria

=== Habilitar la administración automática

[source,sql]
----
alter system set memory_target = nM;
alter system set sga target = 0;
alter system set pga_aggregate_target = 0;
----

Hay formas de moniterar si hicimos bien la asignación de memoria. 
Hay datos que nos pueden sugerir que se cambie alguna configuración.

Para el caso de la memoria tenemos la vista `v$memory_target_advice`

[source,sql]
----
select *
from v$memory_target_advice
order by memory_size;
----

image::memadvice.png[]


=== Administración manual de la memoria

Este es el nivel 3 de administración

* Los componentes de la SGA tendrán un valor distinto de cero.
** buffer cache
** shared pool
** large pool
** Java pool
* Automatic Share Memory tiene que tener un valor de cero
** memory_target
** sga_target

Si estamos en nivel 3 y queremos cambiar a nivel 2 o 1

[source,sql]
----
select (
  ( select sum(value)) from v$sga ) -
  ( select current size from v$sga dynamic free memory)
  "sga_target"
) from dual;
----
